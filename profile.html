<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>My Profile - New S Mart</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <style>
    .profile-container { max-width: 1000px; margin: 40px auto; padding: 20px; }
    .profile-header { text-align: center; margin-bottom: 40px; padding: 20px; background: linear-gradient(135deg, #FF6B35 0%, #004E89 100%); color: white; border-radius: 12px; }
    .profile-header h1 { margin: 0; font-size: 2.5rem; }
    .profile-header p { margin: 10px 0 0; font-size: 1.1rem; }
    
    .tabs { display: flex; gap: 10px; margin-bottom: 30px; border-bottom: 2px solid #ddd; flex-wrap: wrap; }
    .tab-btn { padding: 12px 20px; background: none; border: none; cursor: pointer; font-size: 16px; font-weight: 600; color: #999; border-bottom: 3px solid transparent; transition: all 0.3s; }
    .tab-btn.active { color: #FF6B35; border-bottom-color: #FF6B35; }
    .tab-btn:hover { color: #FF6B35; }
    
    .tab-content { display: none; }
    .tab-content.active { display: block; }
    
    .section { background: white; padding: 25px; border-radius: 8px; margin-bottom: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
    .section-title { font-size: 1.3rem; font-weight: 600; color: #333; margin-bottom: 20px; border-bottom: 2px solid #FF6B35; padding-bottom: 10px; }
    
    .form-group { margin-bottom: 15px; }
    .form-group label { display: block; margin-bottom: 5px; font-weight: 600; color: #333; }
    .form-group input, .form-group select { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; font-size: 14px; }
    .form-group input:focus, .form-group select:focus { outline: none; border-color: #FF6B35; box-shadow: 0 0 0 3px rgba(255,107,53,0.1); }
    
    .form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
    
    .info-item { padding: 15px; background: #f9f9f9; border-radius: 4px; margin-bottom: 15px; }
    .info-item strong { color: #FF6B35; }
    
    .btn-save { background-color: #FF6B35; color: white; padding: 12px 30px; border: none; border-radius: 4px; font-weight: 600; cursor: pointer; font-size: 16px; transition: all 0.3s; }
    .btn-save:hover { background-color: #E55A24; transform: translateY(-2px); box-shadow: 0 6px 12px rgba(255,107,53,0.3); }
    
    .btn-edit { background-color: #004E89; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer; margin-right: 10px; transition: all 0.3s; }
    .btn-edit:hover { background-color: #003366; }
    
    .btn-delete { background-color: #e74c3c; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer; transition: all 0.3s; }
    .btn-delete:hover { background-color: #c0392b; }
    
    .address-card { padding: 15px; border: 1px solid #ddd; border-radius: 8px; margin-bottom: 15px; position: relative; }
    .address-badge { position: absolute; top: 10px; right: 10px; background: #FF6B35; color: white; padding: 5px 10px; border-radius: 4px; font-size: 12px; font-weight: 600; }
    
    .payment-card { padding: 15px; border: 1px solid #ddd; border-radius: 8px; margin-bottom: 15px; background: linear-gradient(135deg, #f5f5f5 0%, #e8e8e8 100%); }
    .card-number { font-family: monospace; letter-spacing: 2px; }
    
    .edit-form { display: none; }
    .edit-form.active { display: block; }
  </style>
</head>
<body style="background: #f5f5f5;">
  
  <div class="profile-container">
    <div class="profile-header">
      <h1 id="userName">Welcome, User</h1>
      <p id="userEmail">user@email.com</p>
    </div>
    
    <div class="tabs">
      <button class="tab-btn active" onclick="switchTab(event, 'personal')"><i class="fas fa-user"></i> Personal Info</button>
      <button class="tab-btn" onclick="switchTab(event, 'shipping')"><i class="fas fa-truck"></i> Shipping Address</button>
      <button class="tab-btn" onclick="switchTab(event, 'payment')"><i class="fas fa-credit-card"></i> Payment Methods</button>
      <button class="tab-btn" onclick="switchTab(event, 'orders')"><i class="fas fa-shopping-bag"></i> Orders</button>
    </div>
    
    <!-- Personal Information Tab -->
    <div id="personal" class="tab-content active">
      <div class="section">
        <div class="section-title">Personal Information</div>
        <div id="personalInfo">
          <div class="info-item">
            <strong>Full Name:</strong><br>
            <span id="displayName">-</span>
          </div>
          <div class="info-item">
            <strong>Email:</strong><br>
            <span id="displayEmail">-</span>
          </div>
          <div class="info-item">
            <strong>Phone:</strong><br>
            <span id="displayPhone">-</span>
          </div>
          <button class="btn-edit" onclick="toggleEditPersonal()"><i class="fas fa-edit"></i> Edit</button>
          <button class="btn-edit" onclick="logout()" style="background-color: #95a5a6;"><i class="fas fa-sign-out-alt"></i> Logout</button>
        </div>
        
        <div id="editPersonal" class="edit-form">
          <div class="form-group">
            <label>Full Name</label>
            <input type="text" id="editName" placeholder="Enter full name">
          </div>
          <div class="form-group">
            <label>Email</label>
            <input type="email" id="editEmail" placeholder="Enter email">
          </div>
          <div class="form-group">
            <label>Phone Number</label>
            <input type="tel" id="editPhone" placeholder="Enter phone number">
          </div>
          <button class="btn-save" onclick="savePersonalInfo()"><i class="fas fa-check"></i> Save Changes</button>
          <button class="btn-edit" style="background-color: #95a5a6;" onclick="toggleEditPersonal()">Cancel</button>
        </div>
      </div>
    </div>
    
    <!-- Shipping Address Tab -->
    <div id="shipping" class="tab-content">
      <div class="section">
        <div class="section-title">Shipping Addresses</div>
        <div id="shippingAddresses"></div>
        <button class="btn-edit" style="width: 100%; margin-bottom: 20px;" onclick="toggleAddShipping()"><i class="fas fa-plus"></i> Add New Address</button>
        
        <div id="addShippingForm" class="edit-form" style="background: #f9f9f9; padding: 20px; border-radius: 8px;">
          <h3>Add New Shipping Address</h3>
          <div class="form-group">
            <label>Address Label (Home, Office, etc.)</label>
            <input type="text" id="shippingLabel" placeholder="e.g., Home">
          </div>
          <div class="form-group">
            <label>Full Name</label>
            <input type="text" id="shippingName" placeholder="Full name for delivery">
          </div>
          <div class="form-group">
            <label>Street Address</label>
            <input type="text" id="shippingStreet" placeholder="Street address">
          </div>
          <div class="form-row">
            <div class="form-group">
              <label>City</label>
              <input type="text" id="shippingCity" placeholder="City">
            </div>
            <div class="form-group">
              <label>Postal Code</label>
              <input type="text" id="shippingPostal" placeholder="Postal code">
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label>State/Province</label>
              <input type="text" id="shippingState" placeholder="State/Province">
            </div>
            <div class="form-group">
              <label>Country</label>
              <input type="text" id="shippingCountry" placeholder="Country">
            </div>
          </div>
          <div class="form-group">
            <label>Phone Number</label>
            <input type="tel" id="shippingPhone" placeholder="Phone number">
          </div>
          <button class="btn-save" onclick="saveShippingAddress()"><i class="fas fa-check"></i> Save Address</button>
          <button class="btn-edit" style="background-color: #95a5a6;" onclick="toggleAddShipping()">Cancel</button>
        </div>
      </div>
    </div>
    
    <!-- Payment Methods Tab -->
    <div id="payment" class="tab-content">
      <div class="section">
        <div class="section-title">Payment Methods</div>
        <div id="paymentMethods"></div>
        <button class="btn-edit" style="width: 100%; margin-bottom: 20px;" onclick="toggleAddPayment()"><i class="fas fa-plus"></i> Add Payment Method</button>
        
        <div id="addPaymentForm" class="edit-form" style="background: #f9f9f9; padding: 20px; border-radius: 8px;">
          <h3>Add New Payment Method</h3>
          <div class="form-group">
            <label>Payment Type</label>
            <select id="paymentType" onchange="updatePaymentFields()">
              <option value="credit">Credit Card</option>
              <option value="debit">Debit Card</option>
              <option value="bank">Bank Transfer</option>
            </select>
          </div>
          
          <div id="cardFields">
            <div class="form-group">
              <label>Cardholder Name</label>
              <input type="text" id="cardName" placeholder="Name on card">
            </div>
            <div class="form-group">
              <label>Card Number</label>
              <input type="text" id="cardNumber" placeholder="1234 5678 9012 3456" maxlength="19">
            </div>
            <div class="form-row">
              <div class="form-group">
                <label>Expiry Date</label>
                <input type="text" id="cardExpiry" placeholder="MM/YY" maxlength="5">
              </div>
              <div class="form-group">
                <label>CVV</label>
                <input type="text" id="cardCVV" placeholder="123" maxlength="4">
              </div>
            </div>
          </div>
          
          <div id="bankFields" style="display: none;">
            <div class="form-group">
              <label>Account Holder Name</label>
              <input type="text" id="bankName" placeholder="Account holder name">
            </div>
            <div class="form-group">
              <label>Bank Name</label>
              <input type="text" id="bankNameField" placeholder="Bank name">
            </div>
            <div class="form-group">
              <label>Account Number</label>
              <input type="text" id="bankAccount" placeholder="Account number">
            </div>
            <div class="form-group">
              <label>IFSC Code</label>
              <input type="text" id="bankIFSC" placeholder="IFSC code">
            </div>
          </div>
          
          <button class="btn-save" onclick="savePaymentMethod()"><i class="fas fa-check"></i> Save Payment Method</button>
          <button class="btn-edit" style="background-color: #95a5a6;" onclick="toggleAddPayment()">Cancel</button>
        </div>
      </div>
    </div>
    
    <!-- Orders Tab -->
    <div id="orders" class="tab-content">
      <div class="section">
        <div class="section-title">Order History</div>
        <div id="orderHistory"></div>
      </div>
    </div>
  </div>
  
  <script>
    // Load user data on page load
    window.addEventListener('DOMContentLoaded', () => {
      loadUserProfile();
      loadShippingAddresses();
      loadPaymentMethods();
      loadOrders();
    });
    
    function loadUserProfile() {
      const user = JSON.parse(localStorage.getItem('currentUser')) || {};
      document.getElementById('userName').textContent = `Welcome, ${user.name || 'User'}`;
      document.getElementById('userEmail').textContent = user.email || 'user@email.com';
      document.getElementById('displayName').textContent = user.name || '-';
      document.getElementById('displayEmail').textContent = user.email || '-';
      document.getElementById('displayPhone').textContent = user.phone || '-';
      
      document.getElementById('editName').value = user.name || '';
      document.getElementById('editEmail').value = user.email || '';
      document.getElementById('editPhone').value = user.phone || '';
    }
    
    function toggleEditPersonal() {
      document.getElementById('personalInfo').classList.toggle('edit-form');
      document.getElementById('editPersonal').classList.toggle('active');
    }
    
    function savePersonalInfo() {
      const user = JSON.parse(localStorage.getItem('currentUser'))

      user.name = document.getElementById('editName').value;
      user.email = document.getElementById('editEmail').value;
      user.phone = document.getElementById('editPhone').value;
      localStorage.setItem('currentUser', JSON.stringify(user));
      alert('Personal information updated!');
      loadUserProfile();
      toggleEditPersonal();
    }
    function toggleAddShipping(){document.getElementById('addShippingForm').classList.toggle('active');}
    function saveShippingAddress(){const address={id:Date.now(),label:document.getElementById('shippingLabel').value,name:document.getElementById('shippingName').value,street:document.getElementById('shippingStreet').value,city:document.getElementById('shippingCity').value,state:document.getElementById('shippingState').value,postal:document.getElementById('shippingPostal').value,country:document.getElementById('shippingCountry').value,phone:document.getElementById('shippingPhone').value};let addresses=JSON.parse(localStorage.getItem('shippingAddresses')||'[]');addresses.push(address);localStorage.setItem('shippingAddresses',JSON.stringify(addresses));alert('Address saved!');loadShippingAddresses();toggleAddShipping();}
    function loadShippingAddresses(){const addresses=JSON.parse(localStorage.getItem('shippingAddresses')||'[]');const container=document.getElementById('shippingAddresses');if(addresses.length===0){container.innerHTML='<p style="color:#999;text-align:center;padding:20px;">No addresses yet</p>';return;}container.innerHTML=addresses.map(addr=>`<div class="address-card"><div class="address-badge">${addr.label}</div><strong>${addr.name}</strong><br>${addr.street}<br>${addr.city}, ${addr.state} ${addr.postal}<br>${addr.country}<br><i class="fas fa-phone"></i> ${addr.phone}<br><br><button class="btn-delete" onclick="deleteAddress(${addr.id})"><i class="fas fa-trash"></i> Delete</button></div>`).join('');}
    function deleteAddress(id){if(confirm('Delete address?')){let addresses=JSON.parse(localStorage.getItem('shippingAddresses')||'[]');addresses=addresses.filter(a=>a.id!==id);localStorage.setItem('shippingAddresses',JSON.stringify(addresses));loadShippingAddresses();}}
    function toggleAddPayment(){document.getElementById('addPaymentForm').classList.toggle('active');}
    function updatePaymentFields(){const type=document.getElementById('paymentType').value;document.getElementById('cardFields').style.display=type==='credit'||type==='debit'?'block':'none';document.getElementById('bankFields').style.display=type==='bank'?'block':'none';}
    function savePaymentMethod(){const type=document.getElementById('paymentType').value;let payment={id:Date.now(),type:type};if(type==='credit'||type==='debit'){payment.name=document.getElementById('cardName').value;payment.cardLast4=document.getElementById('cardNumber').value.slice(-4);payment.expiry=document.getElementById('cardExpiry').value;}else{payment.name=document.getElementById('bankName').value;payment.bank=document.getElementById('bankNameField').value;payment.account=document.getElementById('bankAccount').value.slice(-4);}let payments=JSON.parse(localStorage.getItem('paymentMethods')||'[]');payments.push(payment);localStorage.setItem('paymentMethods',JSON.stringify(payments));alert('Payment saved!');loadPaymentMethods();toggleAddPayment();}
    function loadPaymentMethods(){const payments=JSON.parse(localStorage.getItem('paymentMethods')||'[]');const container=document.getElementById('paymentMethods');if(payments.length===0){container.innerHTML='<p style="color:#999;text-align:center;padding:20px;">No payments yet</p>';return;}container.innerHTML=payments.map(p=>{let text=p.type==='credit'?'Credit Card':p.type==='debit'?'Debit Card':'Bank';if(p.cardLast4)text+=' ending in '+p.cardLast4;else text+=' - '+p.account;return `<div class="payment-card"><div>${text}</div><small>${p.name}</small><br><button class="btn-delete" onclick="deletePayment(${p.id})"><i class="fas fa-trash"></i> Delete</button></div>`;}).join('');}
    function deletePayment(id){if(confirm('Delete payment?')){let payments=JSON.parse(localStorage.getItem('paymentMethods')||'[]');payments=payments.filter(p=>p.id!==id);localStorage.setItem('paymentMethods',JSON.stringify(payments));loadPaymentMethods();}}
    function loadOrders(){const orders=JSON.parse(localStorage.getItem('userOrders')||'[]');const container=document.getElementById('orderHistory');if(orders.length===0){container.innerHTML='<p style="color:#999;text-align:center;padding:20px;">No orders yet. <a href="index.html">Start shopping!</a></p>';return;}container.innerHTML=orders.map(o=>`<div class="info-item"><strong>Order #${o.id}</strong> - ${new Date(o.date).toLocaleDateString()}<br>Total: <strong>Rs.${o.total}</strong><br>Status: <span style="color:#FF6B35;font-weight:600;">${o.status}</span></div>`).join('');}
    function switchTab(event,tabName){event.preventDefault();document.querySelectorAll('.tab-content').forEach(t=>t.classList.remove('active'));document.querySelectorAll('.tab-btn').forEach(b=>b.classList.remove('active'));document.getElementById(tabName).classList.add('active');event.target.closest('.tab-btn').classList.add('active');}
    function logout(){if(confirm('Logout?')){localStorage.removeItem('currentUser');window.location='index.html';}}
  </script>
</body>
</html>
